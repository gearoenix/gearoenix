FUNCTION(GX_DOWNLOAD_FILE URL FILE_NAME)
    IF(NOT EXISTS "${FILE_NAME}.zip")
        MESSAGE(STATUS "Downloading file from ${URL} ...")
        FILE(DOWNLOAD ${URL} "${FILE_NAME}.zip" TIMEOUT 180)
    ENDIF()
    IF(NOT EXISTS "${FILE_NAME}")
        MESSAGE(STATUS "Uncompressing the ${FILE_NAME}.zip ..")
		
		IF(GX_UNCOMPRESS_TOP_FOLDER STREQUAL "ON")
			FILE(REMOVE_RECURSE "${FILE_NAME}-tmp")
			FILE(ARCHIVE_EXTRACT INPUT "${FILE_NAME}.zip" DESTINATION "${FILE_NAME}-tmp")
			FILE(GLOB INNER_DIR "${FILE_NAME}-tmp/*")
			FILE(RENAME ${INNER_DIR} ${FILE_NAME})
			FILE(REMOVE_RECURSE "${FILE_NAME}-tmp")
		ELSE ()
			FILE(ARCHIVE_EXTRACT INPUT "${FILE_NAME}.zip" DESTINATION "${FILE_NAME}")
		ENDIF()
        MESSAGE(STATUS "Library ${FILE_NAME} has been created.")
    ENDIF()
ENDFUNCTION(GX_DOWNLOAD_FILE)